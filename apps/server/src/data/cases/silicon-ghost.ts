import { CaseDefinition } from '@shadows/shared';

export const siliconGhost: CaseDefinition = {
  id: 'silicon-ghost',
  title: 'The Silicon Ghost',
  setting: 'San Francisco Bay Area, 2024',
  synopsis: `Marcus Chen, founder of quantum computing startup Nexus Labs, vanished 48 hours before the company's $2 billion IPO. His Tesla was found abandoned at a scenic overlook, engine still running, laptop missing. Was it cold feet, corporate sabotage, or something darker?`,

  atmosphere: 'Gleaming tech campuses, buzzing with nervous energy. The future is being built here — but so are empires of deceit.',
  solution:
    'Marcus discovered that Alex Torres had been accessing Nexus systems using old credentials. Alex, bitter over their split, was blackmailing Marcus with evidence of early IP theft. When Marcus confronted Alex at Hawk Hill, Alex panicked. The black SUV belonged to people Alex owed money to — Marcus witnessed a deal gone wrong and fled. He is alive but in hiding, gathering evidence to expose both Alex and the financial irregularities Victoria covered up.',

  npcs: [
    {
      id: 'victoria',
      name: 'Victoria Okonkwo',
      role: 'Nexus Labs COO',
      locationId: 'nexus-hq',
      personality: {
        voice: 'Precise, data-driven, every word optimized for impact',
        speechPatterns: [
          'Uses metrics and percentages constantly',
          'Says "let\'s align on this" and "circle back"',
          'Maintains composure but shows micro-expressions of stress',
        ],
        backstory:
          'Stanford MBA who joined Nexus two years ago and rapidly rose to COO. Discovered accounting irregularities weeks ago but said nothing. Marcus confided in her that he was being blackmailed. She knows more than she admits.',
        mannerisms: [
          'Checks phone mid-conversation when uncomfortable',
          'Straightens already-perfect papers on desk',
          'Her composure cracks when IPO pressure is mentioned',
        ],
      },
      relationships: [
        { npcId: 'derek', nature: 'Professional but distant; sees him as a liability', knownByPlayer: false },
        { npcId: 'priya', nature: 'Allies on the surface; competing for control', knownByPlayer: false },
        { npcId: 'alex', nature: 'Knows about his grudge against Marcus', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'accounting-files',
          revealThreshold: 50,
          deflectionHint: 'Redirect to discussing Nexus\'s strong financials and IPO readiness',
          revealGuidance: 'Reluctantly show encrypted files with $3M unexplained offshore transfers',
        },
        {
          clueId: 'blackmail-mention',
          revealThreshold: 65,
          deflectionHint: 'Express worry about Marcus but claim not to know details',
          revealGuidance: 'Reveal Marcus said someone was threatening to expose "something from his past"',
        },
      ],
      trustLevel: 30,
      mood: 'professional but guarded',
      introduced: false,
    },
    {
      id: 'derek',
      name: 'Derek Huang',
      role: 'Lead engineer, Marcus\'s college roommate',
      locationId: 'server-room',
      personality: {
        voice: 'Nerdy, anxious, speaks in technical tangents',
        speechPatterns: [
          'Starts sentences with "So basically..."',
          'Uses gaming and sci-fi references',
          'Gets more technical when nervous',
        ],
        backstory:
          'The actual genius behind the quantum breakthrough — but Marcus got all the credit. Found a burner phone in the server room after Marcus vanished. Bitter about the IP situation but genuinely worried about his friend.',
        mannerisms: [
          'Fidgets with mechanical keyboard keycap',
          'Avoids eye contact when discussing credit',
          'Types on phantom keyboard when thinking',
        ],
      },
      relationships: [
        { npcId: 'victoria', nature: 'Intimidated by her corporate polish', knownByPlayer: false },
        { npcId: 'alex', nature: 'Respects his technical skills; unaware of his scheming', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'burner-phone',
          revealThreshold: 55,
          deflectionHint: 'Mention finding "nothing unusual" in Marcus\'s workspace',
          revealGuidance: 'Show the prepaid phone taped under a server rack, contact "A.T." visible',
        },
        {
          clueId: 'ip-dispute',
          revealThreshold: 45,
          deflectionHint: 'Deflect with "Marcus was the visionary, I just code"',
          revealGuidance: 'Reveal original patents listed him as primary inventor before being amended',
        },
      ],
      trustLevel: 40,
      mood: 'nervous and sleep-deprived',
      introduced: false,
    },
    {
      id: 'priya',
      name: 'Priya Sharma',
      role: 'VC partner at Redwood Capital',
      locationId: 'vc-office',
      personality: {
        voice: 'Confident, transactional, treats everything like a deal',
        speechPatterns: [
          'Frames everything in ROI and runway',
          'Name-drops successful founders',
          'Speaks in hockey-stick growth metaphors',
        ],
        backstory:
          'Senior partner who pushed hard for Nexus IPO timeline despite Marcus\'s objections. Her fund is down 40% and desperately needs this win. Terrified of SEC investigation if things unravel.',
        mannerisms: [
          'Checks phone constantly during conversations',
          'Leans back when evaluating, forward when interested',
          'Voice gets clipped when fund performance is questioned',
        ],
      },
      relationships: [
        { npcId: 'victoria', nature: 'Business alliance built on mutual need', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'ipo-pressure',
          revealThreshold: 40,
          deflectionHint: 'Frame the IPO as "Marcus\'s vision finally realized"',
          revealGuidance: 'Admit board meetings show she overruled Marcus\'s timeline concerns',
        },
        {
          clueId: 'fund-trouble',
          revealThreshold: 75,
          deflectionHint: 'Dismiss questions about fund performance as "standard market fluctuation"',
          revealGuidance: 'Confess Redwood is down 40% and Nexus is their only path to returns',
        },
      ],
      trustLevel: 25,
      mood: 'impatient and calculating',
      introduced: false,
    },
    {
      id: 'alex',
      name: 'Alex Torres',
      role: 'Marcus\'s ex-partner, runs rival startup',
      locationId: 'coffee-shop',
      personality: {
        voice: 'Bitter beneath zen acceptance',
        speechPatterns: [
          'Claims to have "moved on" but keeps score',
          'Speaks about mindfulness while being passive-aggressive',
          'Uses startup failure as wisdom',
        ],
        backstory:
          'Co-founded the original company with Marcus before a bitter split. Still has backdoor access to Nexus systems — and used it three days before Marcus vanished. Was at the overlook that night.',
        mannerisms: [
          'Smiles that don\'t reach his eyes',
          'Orders elaborate coffee drinks to seem casual',
          'Checks over shoulder when discussing Marcus',
        ],
      },
      relationships: [
        { npcId: 'derek', nature: 'Occasional professional contact; uses him for intel', knownByPlayer: false },
        { npcId: 'victoria', nature: 'Mutual distrust; she suspects his grudge', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'system-access',
          revealThreshold: 50,
          deflectionHint: 'Claim complete separation from Nexus for "personal growth"',
          revealGuidance: 'Admit old credentials were never revoked — access logs prove he used them',
        },
        {
          clueId: 'overlook-witness',
          revealThreshold: 65,
          deflectionHint: 'Say he was "meditating at home" that night',
          revealGuidance: 'Confess being at Hawk Hill — saw Marcus meet someone in a black SUV',
        },
      ],
      trustLevel: 20,
      mood: 'performatively calm',
      introduced: false,
    },
  ],

  locations: [
    {
      id: 'nexus-hq',
      name: 'Nexus Labs Headquarters',
      description: 'Converted warehouse in SoMa with standing desks and a kombucha bar.',
      atmosphere: 'Engineers whisper in clusters. Marcus\'s empty office looms like a memorial.',
      npcIds: ['victoria'],
      searchableClueIds: ['tesla-location'],
      connectedLocationIds: ['server-room', 'vc-office', 'coffee-shop'],
      visited: false,
    },
    {
      id: 'server-room',
      name: 'Quantum Computing Lab',
      description: 'Climate-controlled vault humming with experimental hardware.',
      atmosphere: 'Cold and sterile. Security cameras watch everything — or do they?',
      npcIds: ['derek'],
      searchableClueIds: ['burner-phone'],
      connectedLocationIds: ['nexus-hq'],
      visited: false,
    },
    {
      id: 'vc-office',
      name: 'Redwood Capital Partners',
      description: 'Sand Hill Road office with panoramic views. Abstract art worth more than houses.',
      atmosphere: 'Money hangs in the air like cologne. Every surface is a power play.',
      npcIds: ['priya'],
      searchableClueIds: ['ipo-pressure'],
      connectedLocationIds: ['nexus-hq', 'coffee-shop'],
      visited: false,
    },
    {
      id: 'coffee-shop',
      name: 'Philz Coffee, Castro',
      description: 'Where tech workers pretend to be normal. Laptop screens glow.',
      atmosphere: 'Overheard conversations about Series A rounds and equity splits.',
      npcIds: ['alex'],
      searchableClueIds: [],
      connectedLocationIds: ['nexus-hq', 'vc-office', 'overlook'],
      visited: false,
    },
    {
      id: 'overlook',
      name: 'Hawk Hill Overlook',
      description: 'Marin Headlands viewpoint where Marcus\'s Tesla was found.',
      atmosphere: 'Wind whips off the Pacific. Crime scene tape flutters where the car was.',
      npcIds: [],
      searchableClueIds: ['overlook-witness'],
      connectedLocationIds: ['coffee-shop'],
      visited: false,
    },
  ],

  clues: [
    {
      id: 'tesla-location',
      name: 'Abandoned Tesla Report',
      description: 'Police report: Tesla found at Hawk Hill, engine running, driver door open.',
      sourceId: 'nexus-hq',
      trustThreshold: 0,
      prerequisites: [],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'accounting-files',
      name: 'Financial Irregularities',
      description: 'Encrypted files showing $3M in unexplained transfers to offshore accounts.',
      sourceId: 'victoria',
      trustThreshold: 50,
      prerequisites: ['tesla-location'],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'blackmail-mention',
      name: 'Blackmail Confession',
      description: 'Victoria reveals Marcus was being threatened to expose "something from his past."',
      sourceId: 'victoria',
      trustThreshold: 65,
      prerequisites: ['accounting-files'],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'burner-phone',
      name: 'Hidden Burner Phone',
      description: 'Prepaid phone taped under a server rack. Contains encrypted messages, one contact: "A.T."',
      sourceId: 'server-room',
      trustThreshold: 0,
      prerequisites: [],
      discovered: false,
      tags: ['physical'],
    },
    {
      id: 'ip-dispute',
      name: 'IP Records',
      description: 'Original patent filings show Derek as primary inventor, later amended to only Marcus.',
      sourceId: 'derek',
      trustThreshold: 45,
      prerequisites: [],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'ipo-pressure',
      name: 'Board Meeting Minutes',
      description: 'Documents show Priya pushed for accelerated IPO over Marcus\'s objections.',
      sourceId: 'vc-office',
      trustThreshold: 0,
      prerequisites: [],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'fund-trouble',
      name: 'Fund Performance Report',
      description: 'Redwood Capital is down 40%. Nexus IPO is their only chance to show returns.',
      sourceId: 'priya',
      trustThreshold: 75,
      prerequisites: ['ipo-pressure'],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'system-access',
      name: 'Access Logs',
      description: 'Alex\'s old credentials used to access Nexus systems 3 days before Marcus vanished.',
      sourceId: 'alex',
      trustThreshold: 50,
      prerequisites: ['burner-phone'],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'overlook-witness',
      name: 'Overlook Sighting',
      description: 'Alex admits being at Hawk Hill that night. Saw Marcus meet someone in a black SUV.',
      sourceId: 'alex',
      trustThreshold: 65,
      prerequisites: ['system-access', 'tesla-location'],
      discovered: false,
      tags: ['testimony'],
    },
  ],

  clueConnections: [
    { fromClueId: 'accounting-files', toClueId: 'blackmail-mention', relationship: 'The money trail suggests blackmail payments' },
    { fromClueId: 'blackmail-mention', toClueId: 'burner-phone', relationship: 'The blackmailer likely used the burner phone' },
    { fromClueId: 'burner-phone', toClueId: 'system-access', relationship: '"A.T." could be Alex Torres' },
    { fromClueId: 'ipo-pressure', toClueId: 'fund-trouble', relationship: 'Priya needed the IPO more than a clean exit' },
    { fromClueId: 'system-access', toClueId: 'overlook-witness', relationship: 'Alex had means and was present' },
  ],
};
