import { CaseDefinition } from '@shadows/shared';

export const ginJointBlues: CaseDefinition = {
  id: 'gin-joint-blues',
  title: 'Gin Joint Blues',
  setting: 'New York City, 1924',
  synopsis: `Dolly Valentine, the toast of Harlem's hottest speakeasy, vanished after her midnight set at The Velvet Rabbit. Her dressing room was ransacked, her signature pearls gone. In a city where everyone's breaking the law, who do you trust?`,

  atmosphere: 'Smoke hangs in layers. The band plays like they\'re outrunning something. Every booth holds a secret.',
  solution:
    'Dolly Valentine was really Dorothy Castellano, a mob princess who fled an arranged marriage. The Castellano family tracked her down through Captain O\'Malley, who was on their payroll. The night she vanished, she used the tunnel to escape — but the family\'s men were waiting at the docks. She was taken back to face her fate. Jerome\'s train tickets sit unused. Sal\'s debts were leverage. The pearls were proof of identity.',

  npcs: [
    {
      id: 'sal',
      name: 'Salvatore "Sal" Moretti',
      role: 'Owner of The Velvet Rabbit',
      locationId: 'speakeasy',
      personality: {
        voice: 'Smooth, paternal, but with steel underneath',
        speechPatterns: [
          'Calls everyone "friend" or "pal"',
          'Uses Italian phrases when emotional',
          'Voice drops to a whisper for business',
        ],
        backstory:
          'Built The Velvet Rabbit from nothing, but owes $15,000 to the Castellano family — deadline was the night Dolly vanished. He and Dolly were lovers; the letters in his safe prove it. He\'d burn the city for her.',
        mannerisms: [
          'Adjusts his cufflinks when lying',
          'Looks at the empty stage when Dolly is mentioned',
          'Pours drinks to avoid difficult questions',
        ],
      },
      relationships: [
        { npcId: 'mae', nature: 'Treats her like a daughter; trusts her discretion', knownByPlayer: false },
        { npcId: 'captain', nature: 'Pays him off monthly; mutual contempt', knownByPlayer: false },
        { npcId: 'jerome', nature: 'Jealous of his bond with Dolly', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'mob-debts',
          revealThreshold: 50,
          deflectionHint: 'Claim business is "better than ever, friend"',
          revealGuidance: 'Admit the $15,000 debt — deadline was that night',
        },
        {
          clueId: 'sal-dolly-affair',
          revealThreshold: 70,
          deflectionHint: 'Speak of Dolly as "just the star attraction"',
          revealGuidance: 'Show the love letters; "I would burn this city down for you"',
        },
      ],
      trustLevel: 35,
      mood: 'charming but worried',
      introduced: false,
    },
    {
      id: 'mae',
      name: 'Mae "Lucky" Chen',
      role: 'Cigarette girl, Dolly\'s best friend',
      locationId: 'speakeasy',
      personality: {
        voice: 'Street-smart, quick-witted, fiercely loyal',
        speechPatterns: [
          'Uses slang: "horsefeathers," "ritzy," "flat tire"',
          'Deflects with humor when scared',
          'Goes quiet when police are mentioned',
        ],
        backstory:
          'Immigrant girl who found a friend in Dolly. Helped her sneak out that night for what Dolly called "the last time." Knows about the tunnel to the docks — helped Dolly use it before.',
        mannerisms: [
          'Touches her earring when lying',
          'Scans the room constantly for threats',
          'Voice cracks when discussing Dolly\'s fate',
        ],
      },
      relationships: [
        { npcId: 'sal', nature: 'Loyal employee; he gave her a chance', knownByPlayer: false },
        { npcId: 'jerome', nature: 'Fellow outsiders; quiet understanding', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'secret-meeting',
          revealThreshold: 40,
          deflectionHint: 'Say Dolly left "same as any other night"',
          revealGuidance: 'Reveal she helped Dolly slip out at 11 PM — Dolly said it was "the last time"',
        },
        {
          clueId: 'tunnel-entrance',
          revealThreshold: 55,
          deflectionHint: 'Pretend not to know about any back exits',
          revealGuidance: 'Show the false wall behind the coal furnace leading to the docks',
        },
      ],
      trustLevel: 45,
      mood: 'anxious beneath brightness',
      introduced: false,
    },
    {
      id: 'captain',
      name: 'Captain William O\'Malley',
      role: 'Corrupt police captain',
      locationId: 'police-station',
      personality: {
        voice: 'Gruff Irish brogue, patronizing',
        speechPatterns: [
          'Calls the player "boyo" or "lad/lass"',
          'Makes jokes about Prohibition',
          'Becomes cold and threatening when cornered',
        ],
        backstory:
          'Takes bribes from every speakeasy in the district — The Velvet Rabbit pays $500 monthly. His ledger has a note: "D.V. — handle personally." He was at the club until 2 AM that night, not 10 PM like he claims.',
        mannerisms: [
          'Lights cigars to buy thinking time',
          'Leans back in chair to assert dominance',
          'Hand moves toward gun when federal agents are mentioned',
        ],
      },
      relationships: [
        { npcId: 'sal', nature: 'Business arrangement; would sacrifice him in a heartbeat', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'bribe-ledger',
          revealThreshold: 55,
          deflectionHint: 'Dismiss as "routine community relations"',
          revealGuidance: 'The ledger shows payments and the note about "D.V."',
        },
        {
          clueId: 'omalley-at-club',
          revealThreshold: 65,
          deflectionHint: 'Insist he left at 10 PM sharp',
          revealGuidance: 'Witnesses place him there until 2 AM — his alibi collapses',
        },
      ],
      trustLevel: 15,
      mood: 'dismissive and arrogant',
      introduced: false,
    },
    {
      id: 'jerome',
      name: 'Jerome Washington',
      role: 'Jazz pianist, Dolly\'s musical partner',
      locationId: 'boarding-house',
      personality: {
        voice: 'Poetic, measured, carries the weight of the world',
        speechPatterns: [
          'Speaks about music like it\'s sacred',
          'Uses blues lyrics as metaphors',
          'Becomes formal and distant around white folks',
        ],
        backstory:
          'Brilliant musician who found his voice with Dolly. They were planning to run away together — two train tickets to Chicago. He knows her real identity: Dorothy Castellano, running from an arranged marriage to a mobster. The pearls were her engagement gift from the family.',
        mannerisms: [
          'Plays piano when he can\'t find words',
          'Stares at the two unused train tickets',
          'His walls come down when Dolly\'s singing is mentioned',
        ],
      },
      relationships: [
        { npcId: 'sal', nature: 'Aware of Sal\'s feelings for Dolly; quiet rivalry', knownByPlayer: false },
        { npcId: 'mae', nature: 'Trusted confidant; she passed their messages', knownByPlayer: false },
      ],
      knowledgeBoundaries: [
        {
          clueId: 'escape-plan',
          revealThreshold: 50,
          deflectionHint: 'Say he and Dolly were "just bandmates"',
          revealGuidance: 'Show the train tickets to Chicago dated that morning',
        },
        {
          clueId: 'dolly-past',
          revealThreshold: 75,
          deflectionHint: 'Claim to know nothing about Dolly\'s life before Harlem',
          revealGuidance: 'Reveal she was Dorothy Castellano, the pearls were a mob engagement gift',
        },
      ],
      trustLevel: 30,
      mood: 'grieving but guarded',
      introduced: false,
    },
  ],

  locations: [
    {
      id: 'speakeasy',
      name: 'The Velvet Rabbit',
      description: 'Behind a barbershop facade, down stairs, past a peephole door. Red velvet, brass fixtures, the best gin in Manhattan.',
      atmosphere: 'The band plays on. The empty spotlight on stage feels like a wound.',
      npcIds: ['sal', 'mae'],
      searchableClueIds: ['ransacked-room'],
      connectedLocationIds: ['boarding-house', 'police-station', 'docks'],
      visited: false,
    },
    {
      id: 'boarding-house',
      name: 'Mrs. Patterson\'s Boarding House',
      description: 'A respectable Harlem brownstone. Creaky stairs, thin walls.',
      atmosphere: 'Dolly\'s door is sealed with police tape. Jerome\'s sad piano drifts from the parlor.',
      npcIds: ['jerome'],
      searchableClueIds: ['escape-plan'],
      connectedLocationIds: ['speakeasy', 'police-station'],
      visited: false,
    },
    {
      id: 'police-station',
      name: '28th Precinct Station',
      description: 'Granite fortress on 123rd Street. Drunk tanks and cigar smoke.',
      atmosphere: 'Typewriters clatter. The Dolly Valentine case file sits thin on O\'Malley\'s desk.',
      npcIds: ['captain'],
      searchableClueIds: [],
      connectedLocationIds: ['speakeasy', 'boarding-house', 'docks'],
      visited: false,
    },
    {
      id: 'docks',
      name: 'Hudson River Docks',
      description: 'Pier 54, where bootleggers unload Canadian whiskey at 3 AM.',
      atmosphere: 'Fog rolls off the water. Rats scatter between crates stamped "machine parts."',
      npcIds: [],
      searchableClueIds: [],
      connectedLocationIds: ['speakeasy', 'police-station', 'tunnel'],
      visited: false,
    },
    {
      id: 'tunnel',
      name: 'The Bootlegger\'s Tunnel',
      description: 'Hidden passage from The Velvet Rabbit\'s basement to the docks.',
      atmosphere: 'Footsteps echo. On the ground: a single gardenia, wilted but recent.',
      npcIds: [],
      searchableClueIds: ['wilted-gardenia'],
      connectedLocationIds: ['docks'],
      visited: false,
    },
  ],

  clues: [
    {
      id: 'ransacked-room',
      name: 'Dressing Room Evidence',
      description: 'Dolly\'s dressing room was torn apart. Makeup scattered, costumes slashed — but her money untouched.',
      sourceId: 'speakeasy',
      trustThreshold: 0,
      prerequisites: [],
      discovered: false,
      tags: ['physical'],
    },
    {
      id: 'pearl-necklace',
      name: 'Missing Pearls',
      description: 'Dolly\'s signature pearls, a gift from "an admirer," are the only thing missing.',
      sourceId: 'sal',
      trustThreshold: 30,
      prerequisites: ['ransacked-room'],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'mob-debts',
      name: 'Sal\'s Gambling Debts',
      description: 'Sal owes $15,000 to the Castellano family. Deadline was the night Dolly vanished.',
      sourceId: 'sal',
      trustThreshold: 50,
      prerequisites: [],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'sal-dolly-affair',
      name: 'Love Letters',
      description: 'Passionate letters between Sal and Dolly in his office safe. "I would burn this city down for you."',
      sourceId: 'sal',
      trustThreshold: 70,
      prerequisites: ['mob-debts', 'pearl-necklace'],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'secret-meeting',
      name: 'Midnight Rendezvous',
      description: 'Mae helped Dolly slip out at 11 PM to meet someone. Dolly said it was "the last time."',
      sourceId: 'mae',
      trustThreshold: 40,
      prerequisites: [],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'tunnel-entrance',
      name: 'Hidden Tunnel Access',
      description: 'Behind the coal furnace, a false wall leads to a bootlegger\'s tunnel to the docks.',
      sourceId: 'mae',
      trustThreshold: 55,
      prerequisites: ['secret-meeting'],
      discovered: false,
      tags: ['physical'],
    },
    {
      id: 'bribe-ledger',
      name: 'Captain\'s Little Black Book',
      description: 'List of establishments and monthly "fees." The Velvet Rabbit pays $500. Note: "D.V. — handle personally."',
      sourceId: 'captain',
      trustThreshold: 55,
      prerequisites: [],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'omalley-at-club',
      name: 'Captain\'s Alibi Problem',
      description: 'Witnesses place O\'Malley at The Velvet Rabbit until 2 AM. He claims he left at 10.',
      sourceId: 'captain',
      trustThreshold: 65,
      prerequisites: ['bribe-ledger'],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'escape-plan',
      name: 'Train Tickets to Chicago',
      description: 'Two tickets on the 6 AM train to Chicago, dated the morning after. She never boarded.',
      sourceId: 'boarding-house',
      trustThreshold: 0,
      prerequisites: [],
      discovered: false,
      tags: ['physical'],
    },
    {
      id: 'threatening-note',
      name: '"Stay Away" Note',
      description: 'Note in Jerome\'s room: "She belongs to the family. Keep playing piano if you want to keep your hands."',
      sourceId: 'jerome',
      trustThreshold: 45,
      prerequisites: ['escape-plan'],
      discovered: false,
      tags: ['document'],
    },
    {
      id: 'dolly-past',
      name: 'Dolly\'s True Identity',
      description: 'Jerome reveals Dolly was Dorothy Castellano — running from an arranged marriage to a mobster. The pearls were her engagement gift.',
      sourceId: 'jerome',
      trustThreshold: 75,
      prerequisites: ['threatening-note', 'omalley-at-club'],
      discovered: false,
      tags: ['testimony'],
    },
    {
      id: 'wilted-gardenia',
      name: 'Wilted Gardenia',
      description: 'A single gardenia lies on the tunnel floor, still fragrant but wilting. Dolly always wore gardenias in her hair.',
      sourceId: 'tunnel',
      trustThreshold: 0,
      prerequisites: ['tunnel-entrance'],
      discovered: false,
      tags: ['physical'],
    },
  ],

  clueConnections: [
    { fromClueId: 'ransacked-room', toClueId: 'pearl-necklace', relationship: 'They were searching for something specific' },
    { fromClueId: 'pearl-necklace', toClueId: 'sal-dolly-affair', relationship: 'Who gave her the pearls?' },
    { fromClueId: 'secret-meeting', toClueId: 'tunnel-entrance', relationship: 'How did Dolly leave unseen?' },
    { fromClueId: 'tunnel-entrance', toClueId: 'wilted-gardenia', relationship: 'Dolly came through here' },
    { fromClueId: 'bribe-ledger', toClueId: 'omalley-at-club', relationship: 'What is O\'Malley hiding?' },
    { fromClueId: 'escape-plan', toClueId: 'threatening-note', relationship: 'Someone knew about the escape' },
    { fromClueId: 'threatening-note', toClueId: 'dolly-past', relationship: 'The family found her' },
  ],
};
